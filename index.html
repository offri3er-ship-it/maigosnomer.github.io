<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ –ø–æ –≥–æ—Å–Ω–æ–º–µ—Ä—É</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üöó –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ –ø–æ –≥–æ—Å–Ω–æ–º–µ—Ä—É</h1>
            <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è —Å –Ω–æ–º–µ—Ä–æ–º</p>
        </header>

        <div class="upload-section">
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">üìÅ</div>
                <h3>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</h3>
                <p>–ù–æ–º–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–µ—Ç–∫–æ –≤–∏–¥–µ–Ω –Ω–∞ —Ñ–æ—Ç–æ</p>
                <input type="file" id="fileInput" accept="image/*" class="hidden">
                <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                    –í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ
                </button>
            </div>

            <div class="photo-tips">
                <h4>üì∏ –°–æ–≤–µ—Ç—ã –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:</h4>
                <ul>
                    <li>–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π—Ç–µ –Ω–æ–º–µ—Ä –∫—Ä—É–ø–Ω—ã–º –ø–ª–∞–Ω–æ–º</li>
                    <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–æ–º–µ—Ä —Ö–æ—Ä–æ—à–æ –æ—Å–≤–µ—â–µ–Ω</li>
                    <li>–ò–∑–±–µ–≥–∞–π—Ç–µ –±–ª–∏–∫–æ–≤ –∏ —Ç–µ–Ω–µ–π</li>
                    <li>–î–µ—Ä–∂–∏—Ç–µ –∫–∞–º–µ—Ä—É –ø—Ä—è–º–æ –Ω–∞–ø—Ä–æ—Ç–∏–≤ –Ω–æ–º–µ—Ä–∞</li>
                </ul>
            </div>
        </div>

        <div id="previewSection" class="preview-section hidden">
            <div class="preview-header">
                <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ</h3>
                <button id="changePhoto" class="change-btn">üîÑ –°–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ</button>
            </div>
            <div class="image-container">
                <img id="previewImg" src="" alt="Preview">
                <div class="detection-overlay" id="detectionOverlay"></div>
            </div>
            <button id="recognizeBtn" class="recognize-btn">üîç –†–∞—Å–ø–æ–∑–Ω–∞—Ç—å –Ω–æ–º–µ—Ä</button>
        </div>

        <div id="processing" class="processing hidden">
            <div class="spinner"></div>
            <h3>–†–∞—Å–ø–æ–∑–Ω–∞–µ–º –Ω–æ–º–µ—Ä...</h3>
            <div class="processing-steps">
                <div class="step active">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</div>
                <div class="step">–ò—â–µ–º –Ω–æ–º–µ—Ä–Ω–æ–π –∑–Ω–∞–∫</div>
                <div class="step">–†–∞—Å–ø–æ–∑–Ω–∞–µ–º —Ç–µ–∫—Å—Ç</div>
                <div class="step">–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç</div>
            </div>
        </div>

        <div id="recognitionResult" class="recognition-result hidden">
            <div class="result-header">
                <h3>üéâ –ù–æ–º–µ—Ä —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω!</h3>
                <div class="confidence" id="confidence"></div>
            </div>
            <div id="recognizedPlate" class="recognized-plate"></div>
            
            <div class="plate-image">
                <img id="croppedPlate" src="" alt="–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä">
            </div>

            <div class="result-actions">
                <button id="checkAvtocod" class="avtocod-btn">üìä –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ Avtocod</button>
                <button id="tryAnother" class="try-again-btn">üîÑ –î—Ä—É–≥–æ–π –Ω–æ–º–µ—Ä</button>
            </div>
        </div>

        <div id="manualFallback" class="manual-fallback hidden">
            <div class="fallback-header">
                <h3>–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</h3>
                <p>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –≤—Ä—É—á–Ω—É—é:</p>
            </div>
            <div class="input-group">
                <input type="text" id="manualPlateInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê123–ê–ê777" maxlength="9" class="plate-input">
                <button id="manualCheckBtn" class="check-btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            </div>
        </div>

        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p>–ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å Avtocod...</p>
        </div>

        <div id="result" class="result hidden">
            <div class="result-header">
                <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏</h3>
                <div id="plateNumber" class="plate-number"></div>
            </div>
            <div id="screenshotContainer" class="screenshot-container"></div>
            <div class="actions">
                <button id="newCheck" class="new-check-btn">üîÑ –ù–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</button>
            </div>
        </div>

        <div id="error" class="error hidden">
            <p id="errorMessage">–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞</p>
            <button id="retryButton" class="retry-btn">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Google Cloud Vision API -->
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="app.js"></script>
</body>
</html>
